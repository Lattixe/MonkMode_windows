<Window x:Class="MonkMode.Views.CommandPaletteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Monk Mode"
        Width="560" Height="72"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="False"
        Deactivated="Window_Deactivated"
        PreviewKeyDown="Window_PreviewKeyDown">

    <Window.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                             From="0.95" To="1" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>

    <!-- Outer container with subtle shadow -->
    <Border Padding="20">
        <Border.Effect>
            <DropShadowEffect BlurRadius="40" ShadowDepth="0" Opacity="0.5" Color="Black"/>
        </Border.Effect>
        
        <!-- Main command bar -->
        <Border x:Name="MainBorder"
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="12"
                RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </Border.RenderTransform>
            
            <Grid Margin="16,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Icon/Indicator -->
                <Border Grid.Column="0" 
                        Width="8" Height="8" 
                        CornerRadius="4"
                        Background="{StaticResource AccentBrush}"
                        Margin="0,0,14,0"
                        VerticalAlignment="Center"/>

                <!-- Input -->
                <TextBox x:Name="CommandInput"
                         Grid.Column="1"
                         Style="{StaticResource CommandInput}"
                         VerticalAlignment="Center"
                         TextChanged="CommandInput_TextChanged">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Return" Command="{x:Null}"/>
                    </TextBox.InputBindings>
                </TextBox>

                <!-- Placeholder -->
                <TextBlock x:Name="Placeholder"
                           Grid.Column="1"
                           Text="What are you working on?  e.g. &quot;Write report 25&quot;"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="18"
                           FontFamily="{StaticResource FontFamily}"
                           VerticalAlignment="Center"
                           IsHitTestVisible="False"/>

                <!-- Hint -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center"
                            Margin="12,0,0,0">
                    <Border Background="{StaticResource SurfaceHighBrush}"
                            CornerRadius="4"
                            Padding="6,3"
                            Visibility="{Binding HasInput, ElementName=CommandInput}">
                        <TextBlock Text="â†µ"
                                   Foreground="{StaticResource TextTertiaryBrush}"
                                   FontSize="12"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
    </Border>
</Window>
