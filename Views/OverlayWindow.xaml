<Window x:Class="MonkMode.Views.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Monk Mode Overlay"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False"
        Background="Transparent"
        WindowState="Maximized"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Subtle glow effect for the spotlight border -->
        <DropShadowEffect x:Key="SpotlightGlow" 
                          Color="#FF6B35" 
                          BlurRadius="20" 
                          ShadowDepth="0" 
                          Opacity="0.3"/>
    </Window.Resources>

    <Grid x:Name="RootGrid">
        <!-- The main overlay canvas that covers the entire screen -->
        <Canvas x:Name="OverlayCanvas" ClipToBounds="True">
            
            <!-- The dark overlay with the spotlight cutout -->
            <Path x:Name="DarkOverlay" Fill="Black" Opacity="0.9">
                <Path.Data>
                    <CombinedGeometry GeometryCombineMode="Exclude">
                        <!-- Geometry 1: Full screen rectangle (will be set in code) -->
                        <CombinedGeometry.Geometry1>
                            <RectangleGeometry x:Name="ScreenGeometry"/>
                        </CombinedGeometry.Geometry1>
                        <!-- Geometry 2: The spotlight cutout (active window area) -->
                        <CombinedGeometry.Geometry2>
                            <RectangleGeometry x:Name="SpotlightGeometry" RadiusX="0" RadiusY="0"/>
                        </CombinedGeometry.Geometry2>
                    </CombinedGeometry>
                </Path.Data>
            </Path>
            
            <!-- Optional: Subtle border around the spotlight area -->
            <Border x:Name="SpotlightBorder" 
                    BorderBrush="#40FF6B35" 
                    BorderThickness="2" 
                    CornerRadius="0"
                    Visibility="Collapsed"/>
        </Canvas>

        <!-- Exit button - always visible in top right -->
        <Button x:Name="ExitButton"
                Content="✕ EXIT (Ctrl+Shift+Q)"
                Style="{StaticResource DangerButton}"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,20,20,0"
                Opacity="0.7"
                Click="ExitButton_Click"
                MouseEnter="ExitButton_MouseEnter"
                MouseLeave="ExitButton_MouseLeave"/>

        <!-- Session info panel - subtle display in bottom left -->
        <Border HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Margin="20,0,0,20"
                Background="#20000000"
                CornerRadius="8"
                Padding="16,12"
                Opacity="0.8">
            <StackPanel>
                <TextBlock x:Name="TaskNameText"
                           Text="Current Task: Deep Work"
                           Foreground="#AAFFFFFF"
                           FontSize="12"
                           FontFamily="Segoe UI"/>
                <TextBlock x:Name="SessionTimerText"
                           Text="00:00:00"
                           Foreground="#FF6B35"
                           FontSize="20"
                           FontWeight="Bold"
                           FontFamily="Cascadia Code, Consolas"
                           Margin="0,4,0,0"/>
                <TextBlock x:Name="IntensityText"
                           Text="Intensity: Deep Work"
                           Foreground="#60FFFFFF"
                           FontSize="11"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Intervention counter - top left -->
        <Border x:Name="InterventionBadge"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="20,20,0,0"
                Background="#30EF4444"
                CornerRadius="6"
                Padding="12,8"
                Visibility="Collapsed">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="⚡" FontSize="14" Margin="0,0,6,0"/>
                <TextBlock x:Name="InterventionCountText"
                           Text="0 blocked"
                           Foreground="#EF4444"
                           FontSize="12"
                           FontWeight="SemiBold"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
