<Window x:Class="MonkMode.Views.LauncherWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Monk Mode"
        Icon="/Resources/app.ico"
        Width="420" Height="Auto"
        SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="True"
        PreviewKeyDown="Window_PreviewKeyDown"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetName="MainContainer"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetName="MainContainer"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="6" To="0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource FadeIn}"/>
        </EventTrigger>
    </Window.Triggers>

    <Border x:Name="MainContainer"
            Background="#0C0C0D"
            BorderBrush="#1F1F23"
            BorderThickness="1"
            CornerRadius="12"
            Margin="16"
            Opacity="0">
        <Border.RenderTransform>
            <TranslateTransform Y="6"/>
        </Border.RenderTransform>
        <Border.Effect>
            <DropShadowEffect BlurRadius="32" ShadowDepth="0" Opacity="0.5" Color="#000000"/>
        </Border.Effect>

        <Grid Margin="20,16,20,16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Input Field -->
            <Border Grid.Row="0" 
                    Background="#111114"
                    BorderBrush="#1F1F23"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="14,12">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Search/Focus Icon -->
                    <TextBlock Grid.Column="0"
                               Text="⌘"
                               Foreground="#52525B"
                               FontSize="14"
                               FontWeight="Medium"
                               VerticalAlignment="Center"
                               Margin="0,0,12,0"/>

                    <!-- Text input -->
                    <TextBox x:Name="TaskInput"
                             Grid.Column="1"
                             Background="Transparent"
                             Foreground="#FAFAFA"
                             BorderThickness="0"
                             FontSize="15"
                             CaretBrush="#71717A"
                             VerticalAlignment="Center"
                             TextChanged="TaskInput_TextChanged">
                        <TextBox.Template>
                            <ControlTemplate TargetType="TextBox">
                                <ScrollViewer x:Name="PART_ContentHost" 
                                              VerticalAlignment="Center"/>
                            </ControlTemplate>
                        </TextBox.Template>
                    </TextBox>

                    <!-- Placeholder -->
                    <TextBlock x:Name="Placeholder"
                               Grid.Column="1"
                               Text="Focus on..."
                               Foreground="#3F3F46"
                               FontSize="15"
                               VerticalAlignment="Center"
                               IsHitTestVisible="False"/>

                    <!-- Duration badge -->
                    <Border x:Name="DurationBadge"
                            Grid.Column="2"
                            Background="#18181B"
                            CornerRadius="4"
                            Padding="8,4"
                            Visibility="Collapsed"
                            VerticalAlignment="Center">
                        <TextBlock x:Name="DurationText"
                                   Text="25m"
                                   Foreground="#71717A"
                                   FontSize="12"
                                   FontWeight="Medium"/>
                    </Border>
                </Grid>
            </Border>

            <!-- Footer -->
            <Grid Grid.Row="1" Margin="4,12,4,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Hint -->
                <TextBlock Grid.Column="0"
                           VerticalAlignment="Center"
                           Foreground="#3F3F46"
                           FontSize="11">
                    <Run Text="e.g."/><Run Text=" read emails 10" Foreground="#52525B"/>
                </TextBlock>

                <!-- Actions -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <!-- Enter hint -->
                    <Border Background="#18181B"
                            CornerRadius="4"
                            Padding="6,4"
                            Margin="0,0,8,0"
                            VerticalAlignment="Center">
                        <TextBlock Text="↵"
                                   Foreground="#52525B"
                                   FontSize="11"/>
                    </Border>
                    
                    <!-- Start button -->
                    <Button x:Name="StartButton"
                            IsEnabled="False"
                            Click="Start_Click"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border"
                                        Background="#FAFAFA"
                                        CornerRadius="6"
                                        Padding="14,6">
                                    <TextBlock Text="Start"
                                               Foreground="#09090B"
                                               FontSize="12"
                                               FontWeight="Medium"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#E4E4E7"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#D4D4D8"/>
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="border" Property="Background" Value="#27272A"/>
                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
